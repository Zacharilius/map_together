{% extends "base_page.html" %}

{% load staticfiles %}

{% block page_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'accounts/profile.css' %}" />
{% endblock %}

{% block content %}
<div class="mdl-card mdl-shadow--6dp profile-card">
    <div class="mdl-card__title">
        <h2 class="mdl-card__title-text">Your map rooms</h2>
    </div>
    <div class="mdl-card__supporting-text">
        <ul class="mdl-list">
            {% for map_room in user_map_rooms %}
                <li class="mdl-list__item">
                    <a class="mdl-list__item-primary-content" href="{{ map_room.path }}">
                        <span class="mdl-list__item-primary-content">
                            <i class="material-icons mdl-list__item-avatar">satellite</i>
                            {{ map_room.name }}
                            <span class="mdl-list__item-text-body">
                                {{ map_room.description }}
                            </span>
                        </span>
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>
</div>

<div class="mdl-card mdl-shadow--6dp profile-card">
    <div class="mdl-card__title">
        <h2 class="mdl-card__title-text">Upload your own GeoJSON File to display in your map</h2>
    </div>
    <div class="mdl-card__supporting-text">
        <form class="profile-upload-file-form" enctype="multipart/form-data" action="{% url 'profile' %}" method="post">
            {% csrf_token %}
            <div class="mdl-card__supporting-text">
                <div class="mdl-textfield mdl-js-textfield">
                    <input required type="text" class="mdl-textfield__input" id="profile-upload-file-title" name="title" placeholder="Title">
                    <label class="mdl-textfield__label" for="profile-upload-file-title">Title</label>
                </div>
                <div class="mdl-textfield mdl-js-textfield">
                    <textarea required class="mdl-textfield__input" type="text" rows="3" id="profile-upload-file-description" name="description" placeholder="Description"></textarea>
                    <label class="mdl-textfield__label" for="profile-upload-file-description"></label>
                </div>
                <div class="mdl-textfield mdl-js-textfield mdl-textfield--file">
                    <input required type="text" class="mdl-textfield__input" id="profile-upload-file-upload" placeholder=".json or .js Files less than 1MB" readonly/>
                    <div class="mdl-button mdl-button--primary mdl-button--icon mdl-button--file">
                        <i class="material-icons">attach_file</i>
                        <input type="file" name="geojsonFile" id="profile-upload-file-upload-button">
                    </div>
                    <label class="mdl-textfield__label" for="profile-upload-file-upload"></label>
                </div>
            </div>
            <div class="mdl-card__actions">
                <button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">Submit</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block page_js %}
    <script>
        var navUserData = {{ nav_user_data }};
    </script>
    
    <script type="text/javascript" src="{% static 'accounts/profile.js' %}"></script>
{% endblock %}
